<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>JPA 深入学习 - wanshuo-gitbook</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Table of contents</li><li class="chapter-item expanded "><a href="../../reading/modern-os/index.html"><strong aria-hidden="true">1.</strong> 现代操作系统</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading/modern-os/chapter-1-introduction.html"><strong aria-hidden="true">1.1.</strong> chapter1-introduction</a></li><li class="chapter-item expanded "><a href="../../reading/modern-os/chapter-2-processes-and-threads.html"><strong aria-hidden="true">1.2.</strong> chapter2-processes-and-threads</a></li><li class="chapter-item expanded "><a href="../../reading/modern-os/chapter-7-virtualization-and-cloud.html"><strong aria-hidden="true">1.3.</strong> chapter7-virtualization-and-cloud</a></li><li class="chapter-item expanded "><a href="../../reading/modern-os/questions.html"><strong aria-hidden="true">1.4.</strong> questions</a></li></ol></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/index.html"><strong aria-hidden="true">2.</strong> 流畅的 Python</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/index.html"><strong aria-hidden="true">2.1.</strong> chapters</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter1.the-python-data-model.html"><strong aria-hidden="true">2.1.1.</strong> chapter1-the-python-data-model</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter2.an-array-of-sequences.html"><strong aria-hidden="true">2.1.2.</strong> chapter2-an-array-of-sequences</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter3.dictionaries-and-sets.html"><strong aria-hidden="true">2.1.3.</strong> chapter3-dictionaries-and-sets</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter4.text-versus-bytes.html"><strong aria-hidden="true">2.1.4.</strong> chapter4-text-versus-bytes</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter5.first-class-functions.html"><strong aria-hidden="true">2.1.5.</strong> chapter5-first-class-functions</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter6-design-patterns-with-first-class-functions.html"><strong aria-hidden="true">2.1.6.</strong> chapter6-design-patterns-with-functions</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter7-function-decorators-and-closures.html"><strong aria-hidden="true">2.1.7.</strong> chapter7-function-decorators-and-closures</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter8-object-reference-mutability-recycling.html"><strong aria-hidden="true">2.1.8.</strong> chapter8-object-reference-mutability-and-recycling</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter9-a-pythonic-object.html"><strong aria-hidden="true">2.1.9.</strong> chapter9-a-pythonic-object</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter10-sequence-hacking-hashing-slicing.html"><strong aria-hidden="true">2.1.10.</strong> chapter10-sequencec-hacking-hashing-and-slicing</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/chapters/chapter11-interfaces-from-protocols-to-abcs.html"><strong aria-hidden="true">2.1.11.</strong> chapter11-interfaces-from-protocols-to-abcs</a></li></ol></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/summary/index.html"><strong aria-hidden="true">2.2.</strong> summary</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading/fluent-python/summary/questions.html"><strong aria-hidden="true">2.2.1.</strong> questions</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/summary/python-code-optimization.html"><strong aria-hidden="true">2.2.2.</strong> python-code-optimization</a></li><li class="chapter-item expanded "><a href="../../reading/fluent-python/summary/python-30-seconds.html"><strong aria-hidden="true">2.2.3.</strong> python-30-seconds</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../reading/computer-networking/index.html"><strong aria-hidden="true">3.</strong> 计算机网络-自顶向下</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading/computer-networking/chapter1-computer-networks-and-the-internet.html"><strong aria-hidden="true">3.1.</strong> chapter1-computer-networks-and-the-internet</a></li></ol></li><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/index.html"><strong aria-hidden="true">4.</strong> 数据结构与算法</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/chapters/index.html"><strong aria-hidden="true">4.1.</strong> chapters</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/chapters/chapter-1-introduction.html"><strong aria-hidden="true">4.1.1.</strong> chapter1-introduction</a></li><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/chapters/chapter-2-algorithm-analysis.html"><strong aria-hidden="true">4.1.2.</strong> chapter2-algorithm-analysis</a></li><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/chapters/chapter-3-list-stack-queue.html"><strong aria-hidden="true">4.1.3.</strong> chapter3-list-stack-queue</a></li><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/chapters/chapter-4-tree.html"><strong aria-hidden="true">4.1.4.</strong> chapter4-tree</a></li><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/chapters/chapter-6-heap.html"><strong aria-hidden="true">4.1.5.</strong> chapter6-heap</a></li><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/chapters/chapter-7-sorting.html"><strong aria-hidden="true">4.1.6.</strong> chapter7-sorting</a></li></ol></li><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/summary/index.html"><strong aria-hidden="true">4.2.</strong> summary</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/summary/questions.html"><strong aria-hidden="true">4.2.1.</strong> questions</a></li><li class="chapter-item expanded "><a href="../../reading/data-structures-and-algorithm-analysis-in-c/summary/classic-problems.html"><strong aria-hidden="true">4.2.2.</strong> 经典问题</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../reading/books/index.html"><strong aria-hidden="true">5.</strong> 其他书籍</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading/books/bookshelf.html"><strong aria-hidden="true">5.1.</strong> 书籍列表</a></li><li class="chapter-item expanded "><a href="../../reading/books/zen-and-the-art.html"><strong aria-hidden="true">5.2.</strong> 禅与摩托车维修艺术</a></li><li class="chapter-item expanded "><a href="../../reading/books/the-road-less-traveled.html"><strong aria-hidden="true">5.3.</strong> 少有人走的路</a></li><li class="chapter-item expanded "><a href="../../reading/books/time-as-a-friend.html"><strong aria-hidden="true">5.4.</strong> 李笑来-与时间做朋友</a></li><li class="chapter-item expanded "><a href="../../reading/books/reborn.html"><strong aria-hidden="true">5.5.</strong> 李笑来-Reborn</a></li><li class="chapter-item expanded "><a href="../../reading/books/shediao-yingxiongzhuan.html"><strong aria-hidden="true">5.6.</strong> 射雕英雄传</a></li><li class="chapter-item expanded "><a href="../../reading/books/liangjian.html"><strong aria-hidden="true">5.7.</strong> 亮剑</a></li><li class="chapter-item expanded "><a href="../../reading/books/wan-li-shi-wu-nian.html"><strong aria-hidden="true">5.8.</strong> 万历十五年</a></li><li class="chapter-item expanded "><a href="../../reading/books/zi-bei-yu-chao-yue.html"><strong aria-hidden="true">5.9.</strong> 自卑与超越</a></li><li class="chapter-item expanded "><a href="../../reading/books/ming-li-xue.html"><strong aria-hidden="true">5.10.</strong> 王德峰-命理学</a></li><li class="chapter-item expanded "><a href="../../reading/books/a-brief-history-of-humankind.html"><strong aria-hidden="true">5.11.</strong> 人类简史</a></li><li class="chapter-item expanded "><a href="../../reading/books/mao-xuan.html"><strong aria-hidden="true">5.12.</strong> 毛选</a></li><li class="chapter-item expanded "><a href="../../reading/books/tian-dao.html"><strong aria-hidden="true">5.13.</strong> 遥远的救世主</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/algorithms/index.html"><strong aria-hidden="true">6.</strong> 算法</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/algorithms/arraylist-vs-linklist.html"><strong aria-hidden="true">6.1.</strong> arraylist-vs-linklist</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/algorithms/information-entropy.html"><strong aria-hidden="true">6.2.</strong> information-entropy</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/algorithms/summary.html"><strong aria-hidden="true">6.3.</strong> summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/index.html"><strong aria-hidden="true">7.</strong> database</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/zen-of-db.html"><strong aria-hidden="true">7.1.</strong> zen-of-db</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/mysql-101.html"><strong aria-hidden="true">7.2.</strong> MySQL-101</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/mysql-102.html"><strong aria-hidden="true">7.3.</strong> MySQL-102</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/mysql-103.html"><strong aria-hidden="true">7.4.</strong> MySQL-103</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/elastic-search.html"><strong aria-hidden="true">7.5.</strong> Elasticsearch</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/elastic-logstash.html"><strong aria-hidden="true">7.6.</strong> Logstash</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/oracle-101.html"><strong aria-hidden="true">7.7.</strong> Oracle-101</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/mysql-leetcode.html"><strong aria-hidden="true">7.8.</strong> Mysql-Leetcode</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/database-others.html"><strong aria-hidden="true">7.9.</strong> 其他数据库产品</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/design-data-intensive-app.html"><strong aria-hidden="true">7.10.</strong> 书籍-设计数据密集型应用</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/database/questions.html"><strong aria-hidden="true">7.11.</strong> Questions</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/cryptography-web-security/index.html"><strong aria-hidden="true">8.</strong> 密码学与网络安全</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/cryptography-web-security/cryptography.html"><strong aria-hidden="true">8.1.</strong> 密码学</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/cryptography-web-security/ssh.html"><strong aria-hidden="true">8.2.</strong> ssh 教程</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/cryptography-web-security/authentication-authorization.html"><strong aria-hidden="true">8.3.</strong> 认证和授权</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/cryptography-web-security/single-sign-on.html"><strong aria-hidden="true">8.4.</strong> SSO 单点登录</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/cryptography-web-security/oauth.html"><strong aria-hidden="true">8.5.</strong> OAuth</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/cryptography-web-security/jwt.html"><strong aria-hidden="true">8.6.</strong> jwt</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/cryptography-web-security/security-vulnerability.html"><strong aria-hidden="true">8.7.</strong> 安全漏洞</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/network-web/index.html"><strong aria-hidden="true">9.</strong> 计算机网络相关知识</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/network-web/computer-network.html"><strong aria-hidden="true">9.1.</strong> 计算机网络小知识集合</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/network-web/web-service.html"><strong aria-hidden="true">9.2.</strong> web-service</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/network-web/http-protocol.html"><strong aria-hidden="true">9.3.</strong> http 协议</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/network-web/questions.html"><strong aria-hidden="true">9.4.</strong> questions</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/programming-language/index.html"><strong aria-hidden="true">10.</strong> 编程语言</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/programming-language/go.html"><strong aria-hidden="true">10.1.</strong> go</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/programming-language/kotlin.html"><strong aria-hidden="true">10.2.</strong> kotlin</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/programming-language/rust.html"><strong aria-hidden="true">10.3.</strong> rust</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/programming-language/svg.html"><strong aria-hidden="true">10.4.</strong> svg</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/programming-language/regex.html"><strong aria-hidden="true">10.5.</strong> regex</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/programming-language/windows-bat.html"><strong aria-hidden="true">10.6.</strong> windows-bat</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/programming-language/qt.html"><strong aria-hidden="true">10.7.</strong> QT</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-c/index.html"><strong aria-hidden="true">11.</strong> C++ 开发</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-c/how-to-learn-c.html"><strong aria-hidden="true">11.1.</strong> C语言学习教程</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-c/think-c.html"><strong aria-hidden="true">11.2.</strong> 书籍：Think-C</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-c/deep-c.html"><strong aria-hidden="true">11.3.</strong> C语言深度剖析</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-c/c++.html"><strong aria-hidden="true">11.4.</strong> C++学习</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/index.html"><strong aria-hidden="true">12.</strong> Python 学习</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/note-for-pandas.html"><strong aria-hidden="true">12.1.</strong> pandas 学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/django-version-upgrade.html"><strong aria-hidden="true">12.2.</strong> django 版本升级</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/python-hacker.html"><strong aria-hidden="true">12.3.</strong> 书籍：python-hacker</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/python-craftsman.html"><strong aria-hidden="true">12.4.</strong> 书籍：python 工匠</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/python-packages.html"><strong aria-hidden="true">12.5.</strong> pip 相关知识</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/python-exception.html"><strong aria-hidden="true">12.6.</strong> python 异常处理</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/python-cheetsheet.html"><strong aria-hidden="true">12.7.</strong> python 小知识</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/jupyter-notebook.html"><strong aria-hidden="true">12.8.</strong> jupyter 使用笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/different-methods-in-class.html"><strong aria-hidden="true">12.9.</strong> python 不同的方法</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/pep.html"><strong aria-hidden="true">12.10.</strong> pep: python-enhanced-proposal</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/python-algorithm-data-structure.html"><strong aria-hidden="true">12.11.</strong> python 数据结构与算法</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-python/multiprocessing-and-threading.html"><strong aria-hidden="true">12.12.</strong> 多线程和多进程</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/index.html"><strong aria-hidden="true">13.</strong> Java 学习笔记</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java.html"><strong aria-hidden="true">13.1.</strong> 毕向东 java se 学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java.html"><strong aria-hidden="true">13.2.</strong> java 进阶</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-collection-map.html"><strong aria-hidden="true">13.3.</strong> Java collection学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-array.html"><strong aria-hidden="true">13.4.</strong> Java array 学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/string.html"><strong aria-hidden="true">13.5.</strong> Java string 学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/annotation.html"><strong aria-hidden="true">13.6.</strong> Java Annotation 学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-datetime.html"><strong aria-hidden="true">13.7.</strong> java datetime 学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-reflection.html"><strong aria-hidden="true">13.8.</strong> java 反射学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-new-features.html"><strong aria-hidden="true">13.9.</strong> Java 新特性</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-log.html"><strong aria-hidden="true">13.10.</strong> Java 日志</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-exception.html"><strong aria-hidden="true">13.11.</strong> Java 异常</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-vm.html"><strong aria-hidden="true">13.12.</strong> java 虚拟机</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-junit.html"><strong aria-hidden="true">13.13.</strong> Java JUnit 测试</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/template-engine.html"><strong aria-hidden="true">13.14.</strong> Java 模板引擎</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/design-patterns.html"><strong aria-hidden="true">13.15.</strong> 设计模式学习</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/generics.html"><strong aria-hidden="true">13.16.</strong> 泛型</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/stream.html"><strong aria-hidden="true">13.17.</strong> stream 学习</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/functional-programming.html"><strong aria-hidden="true">13.18.</strong> 函数式编程</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/program-development-in-java.html"><strong aria-hidden="true">13.19.</strong> Java 程序开发原理</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-bin.html"><strong aria-hidden="true">13.20.</strong> Java 自带命令学习</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/java-dev-tools.html"><strong aria-hidden="true">13.21.</strong> Java 开发工具</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java/big-number.html"><strong aria-hidden="true">13.22.</strong> 大数计算和存储</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/index.html"><strong aria-hidden="true">14.</strong> JavaWeb 学习笔记</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/database.html"><strong aria-hidden="true">14.1.</strong> 访问数据库笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/java-persistence-api.html" class="active"><strong aria-hidden="true">14.2.</strong> JPA 深入学习</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/mybatis.html"><strong aria-hidden="true">14.3.</strong> mybatis 学习</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/bean-pojo-dto.html"><strong aria-hidden="true">14.4.</strong> java-bean 分类</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/maven.html"><strong aria-hidden="true">14.5.</strong> Maven 学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/dependencies.html"><strong aria-hidden="true">14.6.</strong> 依赖库整理</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/micro-service.html"><strong aria-hidden="true">14.7.</strong> 微服务架构课</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/architect.html"><strong aria-hidden="true">14.8.</strong> IT老齐架构课笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/restful-api.html"><strong aria-hidden="true">14.9.</strong> restful-api</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/spring.html"><strong aria-hidden="true">14.10.</strong> spring</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/spring-security.html"><strong aria-hidden="true">14.11.</strong> spring-security</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/springboot.html"><strong aria-hidden="true">14.12.</strong> spring-boot</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/springcloud.html"><strong aria-hidden="true">14.13.</strong> spring-cloud</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/reactive.html"><strong aria-hidden="true">14.14.</strong> 响应式 web</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/cache.html"><strong aria-hidden="true">14.15.</strong> 缓存</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/web-api-the-good-parts.html"><strong aria-hidden="true">14.16.</strong> WebAPI 的设计与开发</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/rbac.html"><strong aria-hidden="true">14.17.</strong> RBAC</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/socket.html"><strong aria-hidden="true">14.18.</strong> Socket</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/webservice.html"><strong aria-hidden="true">14.19.</strong> webservice</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/tomcat-servlet.html"><strong aria-hidden="true">14.20.</strong> tomcat-servlet</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/encode-decode.html"><strong aria-hidden="true">14.21.</strong> 编解码</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/note-for-java-web/netty.html"><strong aria-hidden="true">14.22.</strong> Netty</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/index.html"><strong aria-hidden="true">15.</strong> 前端开发</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/nodejs.html"><strong aria-hidden="true">15.1.</strong> nodejs</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/yarn.html"><strong aria-hidden="true">15.2.</strong> yarn 使用</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/repos.html"><strong aria-hidden="true">15.3.</strong> 前端库总结</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/react-dev.html"><strong aria-hidden="true">15.4.</strong> React 开发笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/chrome-extension.html"><strong aria-hidden="true">15.5.</strong> chrome 插件开发</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/ajax.html"><strong aria-hidden="true">15.6.</strong> ajax</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/jquery.html"><strong aria-hidden="true">15.7.</strong> jquery</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/javascript-101.html"><strong aria-hidden="true">15.8.</strong> javascript-101</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/javascript-102.html"><strong aria-hidden="true">15.9.</strong> javascript-102</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/javascript-ie11-compatible.html"><strong aria-hidden="true">15.10.</strong> javascript兼容IE11</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/immutable-js.html"><strong aria-hidden="true">15.11.</strong> immutable.js</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/npm-libs.html"><strong aria-hidden="true">15.12.</strong> npm库</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/html-css-dom.html"><strong aria-hidden="true">15.13.</strong> html-css-dom 学习</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/front-end/web-assembly.html"><strong aria-hidden="true">15.14.</strong> web-assembly</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/nlp/index.html"><strong aria-hidden="true">16.</strong> NLP</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/nlp/nlp-learning.html"><strong aria-hidden="true">16.1.</strong> NLP-Learning</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/nlp/machine-learning.html"><strong aria-hidden="true">16.2.</strong> Machine-Learning</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/index.html"><strong aria-hidden="true">17.</strong> linux</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/linux-cmds.html"><strong aria-hidden="true">17.1.</strong> linux 命令手册</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/linux-cmd-enhanced.html"><strong aria-hidden="true">17.2.</strong> linux 增强命令</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/linux-mythink.html"><strong aria-hidden="true">17.3.</strong> linux 使用心得</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/linux-devops.html"><strong aria-hidden="true">17.4.</strong> linux-运维</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/linux-init.html"><strong aria-hidden="true">17.5.</strong> linux 初始化</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/vim.html"><strong aria-hidden="true">17.6.</strong> vim</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/shell.html"><strong aria-hidden="true">17.7.</strong> shell</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/script-demos.html"><strong aria-hidden="true">17.8.</strong> shell 脚本 demo</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/linux/linux-distribution-history.html"><strong aria-hidden="true">17.9.</strong> linux 历史和发行版</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/github/index.html"><strong aria-hidden="true">18.</strong> github</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/github/github.html"><strong aria-hidden="true">18.1.</strong> github 使用技巧</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/github/gitbook.html"><strong aria-hidden="true">18.2.</strong> 优雅锋利的 gitbook</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/github/git.html"><strong aria-hidden="true">18.3.</strong> 书籍：git-pro</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/github/github-actions.html"><strong aria-hidden="true">18.4.</strong> github-actions</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/github/markdown.html"><strong aria-hidden="true">18.5.</strong> markdown 语法</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/github/git-hook.html"><strong aria-hidden="true">18.6.</strong> githook</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/index.html"><strong aria-hidden="true">19.</strong> 开发工具与技术栈</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/technology-stack.html"><strong aria-hidden="true">19.1.</strong> 技术栈</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/idea.html"><strong aria-hidden="true">19.2.</strong> IDEA 使用学习笔记</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/idea-debug.html"><strong aria-hidden="true">19.3.</strong> IDEA Debug</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/serverless.html"><strong aria-hidden="true">19.4.</strong> serverless</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/apifox.html"><strong aria-hidden="true">19.5.</strong> apifox</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/blockchain.html"><strong aria-hidden="true">19.6.</strong> 区块链</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/web3.html"><strong aria-hidden="true">19.7.</strong> Web3.0</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/vscode.html"><strong aria-hidden="true">19.8.</strong> VSCode</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/docker.html"><strong aria-hidden="true">19.9.</strong> Docker</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/cloud-native.html"><strong aria-hidden="true">19.10.</strong> 云原生</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/message-queue.html"><strong aria-hidden="true">19.11.</strong> 消息队列</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/redis.html"><strong aria-hidden="true">19.12.</strong> Redis</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/selenium.html"><strong aria-hidden="true">19.13.</strong> Selenium</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/nginx.html"><strong aria-hidden="true">19.14.</strong> nginx</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/zookeeper.html"><strong aria-hidden="true">19.15.</strong> zookeeper</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/haproxy.html"><strong aria-hidden="true">19.16.</strong> haproxy-keepalived</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/webhook.html"><strong aria-hidden="true">19.17.</strong> webhook</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/lowcode.html"><strong aria-hidden="true">19.18.</strong> 低代码</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/web-spider.html"><strong aria-hidden="true">19.19.</strong> 网络爬虫</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/make-hexo-theme.html"><strong aria-hidden="true">19.20.</strong> Hexo 主题定制</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/development-tools/swagger.html"><strong aria-hidden="true">19.21.</strong> Swagger</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/software-engineering/index.html"><strong aria-hidden="true">20.</strong> 软件工程</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/software-engineering/software-testing.html"><strong aria-hidden="true">20.1.</strong> 软件测试</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/software-engineering/uml.html"><strong aria-hidden="true">20.2.</strong> UML</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/software-engineering/continuous-integration.html"><strong aria-hidden="true">20.3.</strong> 持续集成</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/software-engineering/software-version.html"><strong aria-hidden="true">20.4.</strong> 软件版本命名</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/software-engineering/zentao.html"><strong aria-hidden="true">20.5.</strong> 项目管理-禅道</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/software-engineering/software-engineering.html"><strong aria-hidden="true">20.6.</strong> 软件工程</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/software-engineering/os-installed-software.html"><strong aria-hidden="true">20.7.</strong> 电脑常用软件整理</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/software-engineering/code-summary.html"><strong aria-hidden="true">20.8.</strong> 编程经验总结</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/technology-lecture/index.html"><strong aria-hidden="true">21.</strong> 技术讲座</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science-notebook/technology-lecture/cs-keep-learning.html"><strong aria-hidden="true">21.1.</strong> keep-learning</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/technology-lecture/atguigu-os.html"><strong aria-hidden="true">21.2.</strong> 尚硅谷-操作系统</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/technology-lecture/future-of-computation.html"><strong aria-hidden="true">21.3.</strong> 吴翰清-计算的未来</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/technology-lecture/xu-shi-wei-architecture.html"><strong aria-hidden="true">21.4.</strong> 许式伟-架构课</a></li><li class="chapter-item expanded "><a href="../../computer-science-notebook/technology-lecture/questions.html"><strong aria-hidden="true">21.5.</strong> questions</a></li></ol></li><li class="chapter-item expanded "><a href="../../weekly/2022/index.html"><strong aria-hidden="true">22.</strong> 2022</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../weekly/2022/week-27.html"><strong aria-hidden="true">22.1.</strong> week-27</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-28.html"><strong aria-hidden="true">22.2.</strong> week-28</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-29.html"><strong aria-hidden="true">22.3.</strong> week-29</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-30.html"><strong aria-hidden="true">22.4.</strong> week-30</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-31-32.html"><strong aria-hidden="true">22.5.</strong> week-31-32</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-32.html"><strong aria-hidden="true">22.6.</strong> week-32</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-33.html"><strong aria-hidden="true">22.7.</strong> week-33</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-34.html"><strong aria-hidden="true">22.8.</strong> week-34</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-35.html"><strong aria-hidden="true">22.9.</strong> week-35</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-36.html"><strong aria-hidden="true">22.10.</strong> week-36</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-37.html"><strong aria-hidden="true">22.11.</strong> week-37</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-38.html"><strong aria-hidden="true">22.12.</strong> week-38</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-39.html"><strong aria-hidden="true">22.13.</strong> week-39</a></li><li class="chapter-item expanded "><a href="../../weekly/2022/week-40.html"><strong aria-hidden="true">22.14.</strong> week-40</a></li></ol></li><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/index.html"><strong aria-hidden="true">23.</strong> blog</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/for-a-job.html"><strong aria-hidden="true">23.1.</strong> 关于找工作</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/how-to-study.html"><strong aria-hidden="true">23.2.</strong> 如何学习</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/summary-for-examination-oriented-education.html"><strong aria-hidden="true">23.3.</strong> 应试教育总结思考</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/cyber-spirit-opium.html"><strong aria-hidden="true">23.4.</strong> 网络精神鸦片</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/why-perfect.html"><strong aria-hidden="true">23.5.</strong> 追求完美？</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/about-love.html"><strong aria-hidden="true">23.6.</strong> 我的恋爱观</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/pin-duo-duo.html"><strong aria-hidden="true">23.7.</strong> 细数在拼多多开店遇到的坑</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/summary-of-marketing.html"><strong aria-hidden="true">23.8.</strong> 营销经验总结</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/blog/real-estate.html"><strong aria-hidden="true">23.9.</strong> 买房经验总结</a></li></ol></li><li class="chapter-item expanded "><a href="../../life-and-thinking/health/index.html"><strong aria-hidden="true">24.</strong> 关于健康</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../life-and-thinking/health/zhong-yi.html"><strong aria-hidden="true">24.1.</strong> 关于中医</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/health/health.html"><strong aria-hidden="true">24.2.</strong> 关于健康</a></li></ol></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/index.html"><strong aria-hidden="true">25.</strong> 求知若渴虚心若愚</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/how-to-keep-learning.html"><strong aria-hidden="true">25.1.</strong> 如何保持学习激情</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/weekly.html"><strong aria-hidden="true">25.2.</strong> 周刊</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/weekly-02.html"><strong aria-hidden="true">25.3.</strong> 周刊-02</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/authentic-expression.html"><strong aria-hidden="true">25.4.</strong> 英语单词和专业词汇</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/knowledge-summary.html"><strong aria-hidden="true">25.5.</strong> 网上冲浪知识总结</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/zhihu.html"><strong aria-hidden="true">25.6.</strong> 知乎摘抄</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/story.html"><strong aria-hidden="true">25.7.</strong> 好的文章</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/principle-of-economics.html"><strong aria-hidden="true">25.8.</strong> 经济学原理学习</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/how-to.html"><strong aria-hidden="true">25.9.</strong> 如何</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/office-tricks.html"><strong aria-hidden="true">25.10.</strong> Office 三件套</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/movies.html"><strong aria-hidden="true">25.11.</strong> 看电影</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/keep-learning/daily-news.html"><strong aria-hidden="true">25.12.</strong> 每日新闻</a></li></ol></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/index.html"><strong aria-hidden="true">26.</strong> 安心立命</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/why.html"><strong aria-hidden="true">26.1.</strong> 为什么要学习</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/difference-between-east-and-west.html"><strong aria-hidden="true">26.2.</strong> 王德峰-中西文化差异</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/yangming.html"><strong aria-hidden="true">26.3.</strong> 王德峰-阳明心学</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/feat-and-practice.html"><strong aria-hidden="true">26.4.</strong> 王德峰-命运与修行</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/truly-maturity.html"><strong aria-hidden="true">26.5.</strong> 关于成熟</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/poetry.html"><strong aria-hidden="true">26.6.</strong> 古诗词摘抄</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-perface.html"><strong aria-hidden="true">26.7.</strong> 王德峰讲坛经-序言</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-01.html"><strong aria-hidden="true">26.8.</strong> 王德峰讲坛经-行由品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-02.html"><strong aria-hidden="true">26.9.</strong> 王德峰讲坛经-般若品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-03.html"><strong aria-hidden="true">26.10.</strong> 王德峰讲坛经-疑问品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-04.html"><strong aria-hidden="true">26.11.</strong> 王德峰讲坛经-定慧品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-05.html"><strong aria-hidden="true">26.12.</strong> 王德峰讲坛经-坐禅品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-06.html"><strong aria-hidden="true">26.13.</strong> 王德峰讲坛经-忏悔品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-07.html"><strong aria-hidden="true">26.14.</strong> 王德峰讲坛经-机缘品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-08.html"><strong aria-hidden="true">26.15.</strong> 王德峰讲坛经-顿悟品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-09.html"><strong aria-hidden="true">26.16.</strong> 王德峰讲坛经-护法品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-10.html"><strong aria-hidden="true">26.17.</strong> 王德峰讲坛经-付嘱品</a></li><li class="chapter-item expanded "><a href="../../life-and-thinking/peace/altar-sutra-wdf-finish.html"><strong aria-hidden="true">26.18.</strong> 王德峰讲坛经-结束语</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">wanshuo-gitbook</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="jpa"><a class="header" href="#jpa">JPA</a></h1>
<p>[TOC]</p>
<h2 id="reference"><a class="header" href="#reference">reference</a></h2>
<ul>
<li><a href="https://jakarta.ee/specifications/persistence/3.0/jakarta-persistence-spec-3.0.html">Jakarta Persistence 3.0 Specification Document</a> </li>
<li><a href="https://jakarta.ee/specifications/persistence/3.0/apidocs">Jakarta Persistence 3.0 Javadoc</a></li>
<li><a href="https://docs.spring.io/spring-data/jpa/docs/2.5.0/reference/html/#preface">Spring Data JPA - Reference Documentation</a></li>
<li><a href="http://download.oracle.com/otn-pub/jcp/persistence-2_1-fr-eval-spec/JavaPersistence.pdf">Java Persistence API - Oracle Software Downloads</a></li>
<li><a href="https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl">Advanced Spring Data JPA - Specifications and Querydsl</a></li>
<li><a href="https://www.baeldung.com/hibernate-criteria-queries">JPA Criteria Queries</a></li>
<li><a href="https://docs.oracle.com/javaee/6/tutorial/doc/gjivm.html">Using the Criteria API and Metamodel API to Create Basic Typesafe Queries</a></li>
<li><a href="https://www.baeldung.com/jpa-join-column">@JoinColumn Annotation Explained</a></li>
<li><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1282383789686817">廖雪峰 jpa 介绍</a></li>
</ul>
<h2 id="intro"><a class="header" href="#intro">Intro</a></h2>
<p>Java Persistence API 是 Sun 官方提出的 Java 持久化规范。</p>
<p>JPA 和 Hibernate 的关系：JPA 是规范（类似于 JDBC），Hibernate 是 JPA 的实现</p>
<h2 id="annotations"><a class="header" href="#annotations">annotations</a></h2>
<table><thead><tr><th>Annotation</th><th>Desc</th><th></th></tr></thead><tbody>
<tr><td><code>@Entity</code></td><td>表示该类为实体类，将映射到指定的数据库表</td><td></td></tr>
<tr><td><code>@Table(name=&quot;table_name&quot;)</code></td><td>指定该类映射表的表名</td><td></td></tr>
<tr><td><code>@Id</code></td><td>映射主键</td><td></td></tr>
<tr><td><code>@GeneratedValue(strategy=&quot;&quot;)</code></td><td>主键生成策略</td><td></td></tr>
<tr><td><code>@Basic</code></td><td>字段的默认注解，如果没有，会自动添加</td><td></td></tr>
<tr><td><code>@Column</code></td><td>指定字段详细属性</td><td></td></tr>
<tr><td><code>@Transient</code></td><td>表示不作映射，可以作用于成员变量和方法</td><td>暂时的</td></tr>
<tr><td><code>@Temporal</code></td><td>指定时间格式</td><td>时间的</td></tr>
</tbody></table>
<h3 id="generatedvalue"><a class="header" href="#generatedvalue">@GeneratedValue</a></h3>
<p>几个 strategy：</p>
<ul>
<li>IDENTITY：ID 自增长，MySQL，Oracle 不支持</li>
<li>AUTO：啥也不填，JPA 自动选择合适的策略，默认选项</li>
<li>SEQUENCE：通过序列产生主键，MySQL 不支持</li>
<li>TABLE：通过表产生主键</li>
</ul>
<h3 id="basic"><a class="header" href="#basic">@Basic</a></h3>
<pre><code class="language-java">@Basic(fetch = FetchType.EAGER, optional = true)
private String email;
</code></pre>
<p>如果一个属性没有加任何注解，那么就会默认加上 basic 注解。</p>
<p>两个参数：</p>
<ul>
<li>fetch: 属性读取策略，EAGER vs LAZY ，饿汉式和懒汉式，默认是 EAGER</li>
<li>optional：属性是否允许为 null，默认式 null</li>
</ul>
<h3 id="column"><a class="header" href="#column">@Column</a></h3>
<p>几个参数：</p>
<ul>
<li>name: 指定列名</li>
<li>length：指定长度，只对字符串有效</li>
<li>nullable：是否允许为 null</li>
<li>unique：是否 unique</li>
<li>columnDefinition：表示该属性在数据库中的实际类型，JPA 无法判断 Date 要转成数据库的 Date，Time 还是 TIMESTAMP</li>
</ul>
<p>String 类型默认映射成 varchar，如果要映射成特定数据库的 BLOB 或 TEXT，则需要指定 columnDefinition。BigInteger 默认映射成长度为 19 的 decimal，如果想让 JPA 映射更大的数，则需要指定 <code>columnDefinition=&quot;decimal(20,2)&quot;</code></p>
<h3 id="temporal"><a class="header" href="#temporal">@Temporal</a></h3>
<pre><code>@Temporal(value=)
</code></pre>
<p>接受一个枚举类型，可选值有三个：</p>
<ul>
<li>DATE 年月日</li>
<li>TIME 年月日 时分秒</li>
<li>TIMESTAMP 兼容前两个</li>
</ul>
<h2 id="jpa-api"><a class="header" href="#jpa-api">jpa-api</a></h2>
<p>Java EE 已经归 Jakarta 组织维护，所以 jakarta 完全兼容 JavaEE，Jakarta Persistence API 就是 JPA。</p>
<h3 id="persistence"><a class="header" href="#persistence">Persistence</a></h3>
<img align="left" src="assets/image-20210529154255679.png" alt="image-20210529154255679" style="zoom:80%;" />
<p>Persistence 的主要作用就是用来创建 EntityManagerFactory 的。</p>
<pre><code class="language-java">String persistenceUnitName = &quot;default&quot;;
Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();
properties.put(&quot;hibernate.format_sql&quot;, true);
EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(persistenceUnitName, properties);
</code></pre>
<h3 id="entitymanagerfactory"><a class="header" href="#entitymanagerfactory">EntityManagerFactory</a></h3>
<p>jpa 连接池，也是一个接口。主要作用还是创建数据库连接。</p>
<img align="left" src="assets/image-20210529155253942.png" alt="image-20210529155253942" style="zoom:80%;" />
<pre><code class="language-java">EntityManager entityManager = entityManagerFactory.createEntityManager();
// 重载的方法：map 用于提供 entityManager 的属性
EntityManager entityManager = entityManagerFactory.createEntityManager(map);
</code></pre>
<p><code>close()</code> 后，<code>isOpen()</code> 方法测试回返回 false，其他方法不能调用，否则回导致 IllegalStateException 异常。</p>
<h3 id="entitymanager"><a class="header" href="#entitymanager">EntityManager</a></h3>
<p>接口。</p>
<p><strong>临时对象</strong>：new 出来的无 id 的对象</p>
<p><strong>游离对象</strong>：new 出来的有 id 的对象</p>
<p><strong>懒加载</strong>：多次查询，对于不常用的级联数据不取出，等到要用的时候再取出。懒加载都设置了代理类。</p>
<p><strong>Eager加载</strong>：一次 join 查询获取所有值</p>
<p>增 persist 删 remove 查 find/getReference </p>
<h4 id="find--getreference--persist--remove--merge"><a class="header" href="#find--getreference--persist--remove--merge">find / getReference / persist / remove / merge</a></h4>
<img align="left" src="assets/image-20210530101236627.png" alt="image-20210530101236627" style="zoom:80%;" />
<pre><code class="language-java">package top.wansho.jpa;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import top.wansho.jpa.helloworld.Customer;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

import static org.junit.jupiter.api.Assertions.*;

public class EntityManagerTest {

    private EntityManagerFactory entityManagerFactory;
    private EntityManager entityManager;
    private EntityTransaction entityTransaction;

    @BeforeEach
    public void init(){
        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;default&quot;);
        entityManager = entityManagerFactory.createEntityManager();
        entityTransaction = entityManager.getTransaction();
        // 开启事务
        entityTransaction.begin();
    }

    @AfterEach
    public void destroy(){
        // 提交事务
        entityTransaction.rollback();
        System.out.println(&quot;entityTransaction is active? &quot; + entityTransaction.isActive()); // true
//        entityTransaction.commit();
        System.out.println(&quot;entityTransaction is active? &quot; + entityTransaction.isActive()); // false
        entityManager.close();
        entityManagerFactory.close();
    }

    @Test
    public void testFind(){
        // 类似于 Hibernate 中的 get 方法，获取 id 为 1 的记录
        Customer customer = entityManager.find(Customer.class, 1);
        System.out.println(&quot;-------------------------&quot;);
        System.out.println(customer);
        // 先打印查询语句，再打印 --，饿汉式
    }

    @Test
    public void testGetReference(){
        // 类似于 Hibernate 中的 load 方法
        Customer customer = entityManager.getReference(Customer.class, 1); // 只获取引用
        System.out.println(customer.getClass().getName()); // top.wansho.jpa.helloworld.Customer$HibernateProxy$GLVOzPIc
        System.out.println(&quot;-------------------------&quot;);
        System.out.println(customer);
        // 先打印 --，再打印查询语句，懒加载，懒汉式，customer 是一个代理对象
    }

    @Test
    public void testPersist(){
        // 类似于 Hibernate 的 save 方法，使对象由临时状态变为持久化状态
        // 和 Hibernate 的 save 方法有些许不同，如果对象有 id，则不能执行 insert 操作，而会抛出异常
        Customer customer = new Customer();
        customer.setAge(13);
        customer.setEmail(&quot;wansho@163.com&quot;);
        customer.setLastName(&quot;www&quot;);
        entityManager.persist(customer);
        System.out.println(customer.getId()); // 有 id 了
    }

    @Test
    public void testRemove(){
        // 类似于 Hibernate 的 delete 对象，把对象对应的记录从数据库中移除
        // 注意：该方法只能移除持久化对象，而 hibernate 的 delete 方法实际上还可以移除游离对象
//        Customer customer = new Customer();
//        customer.setId(1); // 还是因为代理类的原因，不能删除游离对象
        Customer customer = entityManager.find(Customer.class, 1);
        entityManager.remove(customer);
    }

    @Test
    public void testMerge1(){
        // 1. 测试临时对象
        // 如果传入一个临时对象（没有 id），会创建一个新的对象，把临时对象的属性复制到新的对象中，然后对新的对象执行持久化操作
        // 所以新的对象会有 id，而临时对象没有 id
        Customer customer = new Customer();
        customer.setEmail(&quot;hehe@gmail.com&quot;);
        customer.setAge(18);
        customer.setLastName(&quot;ww&quot;);

        Customer customer2 = entityManager.merge(customer);
        System.out.println(customer.getId()); // null
        System.out.println(customer2.getId()); // 有 id
    }

    @Test
    public void testMerge2(){
        // 2. 测试游离对象
        // 2.1 在 EntityManager 缓存中没有该对象
        // 2.2 在数据库中也没有对应的记录
        // 2.3 JPA 会创建一个新的对象，然后把当前游离对象的属性复制到新创建的对象中
        // 2.4 对新创建的对象执行 insert 操作
        Customer customer = new Customer();
        customer.setEmail(&quot;hehe@gmail.com&quot;);
        customer.setAge(18);
        customer.setLastName(&quot;ww&quot;);
        customer.setId(20);

        Customer customer2 = entityManager.merge(customer);
        System.out.println(customer.getId());  // 20
        System.out.println(customer2.getId()); // 6，新对象 的 id 自增，和写入的 id 不一样
    }

    @Test
    public void testMerge3(){
        // 3. 测试游离对象
        // 3.1 在 EntityManager 缓存中没有该对象
        // 3.2 在数据库中有对应的记录
        // 3.3 JPA 会查询对应的记录，然后返回该记录对应的对象，然后再把游离对象的属性复制到查询到的对象中
        // 3.4 对查询到的对象进行 update
        Customer customer = new Customer();
        customer.setEmail(&quot;ww@gmail.com&quot;);
        customer.setAge(18);
        customer.setLastName(&quot;ww&quot;);
        customer.setId(6);

        Customer customer2 = entityManager.merge(customer);
        System.out.println(customer2 == customer); // false
        System.out.println(customer.getId());  // 6
        System.out.println(customer2.getId()); // 6，新对象 的 id 自增，和写入的 id 不一样
    }

    @Test
    public void testMerge4(){
        // 4. 测试游离对象
        // 4.1 在 EntityManager 缓存有该对象
        // 4.2 JPA 会把游离对象的属性直接复制给缓存中的对象
        // 4.3 对缓存中的对象执行 update
        Customer customer = new Customer();
        customer.setEmail(&quot;ww@gmail.com&quot;);
        customer.setAge(18);
        customer.setLastName(&quot;ww&quot;);
        customer.setId(6);

        Customer customer2 = entityManager.find(Customer.class, 6);
        entityManager.merge(customer);
        System.out.println(customer2 == customer);
    }

    @Test
    public void testFlush(){
        // 同 Hibernate 中 session 的 flush 方法，强制写入数据库
        Customer customer = entityManager.find(Customer.class, 1);
        customer.setLastName(&quot;dd&quot;);
        entityManager.flush();
    }

    @Test
    public void testRefresh(){
        // 从数据库中读最新的数据，强制刷新
        Customer customer = entityManager.find(Customer.class, 2); // select 1
        customer = entityManager.find(Customer.class, 2); // jpa 有一级缓存，这条语句没有去数据库中查询
        entityManager.refresh(customer); // select 2
        // 一共执行了两条查询语句
    }

}
</code></pre>
<h4 id="flush--setflushmode--getflushmode"><a class="header" href="#flush--setflushmode--getflushmode">flush / setFlushMode / getFlushMode</a></h4>
<p>强制将内存中的数据写入数据库，进行持久化。</p>
<h4 id="refresh"><a class="header" href="#refresh">refresh</a></h4>
<p>强制刷新。将数据库中的持久化对象的值同步到实体对象上，即更新实例的属性值。</p>
<h4 id="clear"><a class="header" href="#clear">clear</a></h4>
<p>Clear the persistence context, causing all managed entities to become detached.</p>
<p>清除持久上下文环境，断开所有关联的实体。</p>
<h4 id="isopen--gettransaction--close"><a class="header" href="#isopen--gettransaction--close">isOpen / getTransaction / close</a></h4>
<h4 id="createquery"><a class="header" href="#createquery">createQuery</a></h4>
<p>类似的接口都是用来做 jpql 查询的。</p>
<h3 id="entitytransaction"><a class="header" href="#entitytransaction">EntityTransaction</a></h3>
<pre><code class="language-java">@BeforeEach
    public void init(){
        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;default&quot;);
        entityManager = entityManagerFactory.createEntityManager();
        entityTransaction = entityManager.getTransaction();
        // 开启事务
        entityTransaction.begin();
    }

    @AfterEach
    public void destroy(){
        
        entityTransaction.rollback();  // 回滚事务
//        entityTransaction.commit(); // 提交事务
        System.out.println(&quot;entityTransaction is active? &quot; + entityTransaction.isActive()); // false
        entityManager.close();
        entityManagerFactory.close();
    }
</code></pre>
<p>事务，要么提交，要么回滚，不能同时存在。提交或回滚后，事务就 isNotActive 了。</p>
<h2 id="springdata-repositories"><a class="header" href="#springdata-repositories">springdata-repositories</a></h2>
<img align="left" src="assets/image-20210531170125902.png" alt="image-20210531170125902" style="zoom:80%;" />
<p>The central interface in the Spring Data repository abstraction is <code>Repository</code>. It takes the domain class to manage as well as the ID type of the domain class as type arguments. This interface acts primarily as a marker interface to capture the types to work with and to help you to discover interfaces that extend this one. The <a href="https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html"><code>CrudRepository</code></a> interface provides sophisticated CRUD functionality for the entity class that is being managed.</p>
<h3 id="crudrepository"><a class="header" href="#crudrepository">CrudRepository</a></h3>
<pre><code class="language-java">public interface CrudRepository&lt;T, ID&gt; extends Repository&lt;T, ID&gt; {

  &lt;S extends T&gt; S save(S entity);      // Saves the given entity.

  Optional&lt;T&gt; findById(ID primaryKey); // 

  Iterable&lt;T&gt; findAll();               

  long count();                        

  void delete(T entity);               

  boolean existsById(ID primaryKey);   

  // … more functionality omitted.
}
</code></pre>
<h3 id="pagingandsortingrepository"><a class="header" href="#pagingandsortingrepository">PagingAndSortingRepository</a></h3>
<p>支持分页。</p>
<pre><code class="language-java">public interface PagingAndSortingRepository&lt;T, ID&gt; extends CrudRepository&lt;T, ID&gt; {

  Iterable&lt;T&gt; findAll(Sort sort);

  Page&lt;T&gt; findAll(Pageable pageable);
}

PagingAndSortingRepository&lt;User, Long&gt; repository = // … get access to a bean
Page&lt;User&gt; users = repository.findAll(PageRequest.of(1, 20));
</code></pre>
<h3 id="jparepository"><a class="header" href="#jparepository">JpaRepository</a></h3>
<p>继承自 PagingAndSortingRepository 接口，支持分页。</p>
<pre><code class="language-java">public interface JpaRepository&lt;T, ID&gt; extends PagingAndSortingRepository&lt;T, ID&gt;, QueryByExampleExecutor&lt;T&gt; {
    List&lt;T&gt; findAll();

    List&lt;T&gt; findAll(Sort var1);

    List&lt;T&gt; findAllById(Iterable&lt;ID&gt; var1);

    &lt;S extends T&gt; List&lt;S&gt; saveAll(Iterable&lt;S&gt; var1);

    void flush();

    &lt;S extends T&gt; S saveAndFlush(S var1);

    void deleteInBatch(Iterable&lt;T&gt; var1);

    void deleteAllInBatch();

    T getOne(ID var1);

    &lt;S extends T&gt; List&lt;S&gt; findAll(Example&lt;S&gt; var1);

    &lt;S extends T&gt; List&lt;S&gt; findAll(Example&lt;S&gt; var1, Sort var2);
}
</code></pre>
<h3 id="query-methods"><a class="header" href="#query-methods">Query Methods</a></h3>
<p>创建 Query Methods 的四个步骤：</p>
<ol>
<li>
<p>Declare an interface extending Repository or one of its subinterfaces and type it to the domain class and ID type that it should handle, as shown in the following example:</p>
<pre><code class="language-java">interface PersonRepository extends Repository&lt;Person, Long&gt; { … }
</code></pre>
</li>
<li>
<p>Declare query methods on the interface.</p>
<pre><code class="language-java">interface PersonRepository extends Repository&lt;Person, Long&gt; {
  List&lt;Person&gt; findByLastname(String lastname);
}
</code></pre>
</li>
<li>
<p>Set up Spring to create proxy instances for those interfaces, either with <a href="https://docs.spring.io/spring-data/jpa/docs/2.5.0/reference/html/#repositories.create-instances.java-config">JavaConfig</a> or with <a href="https://docs.spring.io/spring-data/jpa/docs/2.5.0/reference/html/#repositories.create-instances">XML configuration</a>.</p>
<pre><code class="language-java">import org.springframework.data.jpa.repository.config.EnableJpaRepositories;

@EnableJpaRepositories
class Config { … }
</code></pre>
</li>
<li>
<p>Inject the repository instance and use it, as shown in the following example:</p>
<pre><code class="language-java">class SomeClient {

  private final PersonRepository repository;

  SomeClient(PersonRepository repository) {
    this.repository = repository;
  }

  void doSomething() {
    List&lt;Person&gt; persons = repository.findByLastname(&quot;Matthews&quot;);
  }
}
</code></pre>
</li>
</ol>
<h3 id="defining-repository-interfaces"><a class="header" href="#defining-repository-interfaces">Defining Repository Interfaces</a></h3>
<p>如何定义 repository 接口</p>
<p>To define a repository interface, you first need to define a domain class-specific repository interface. The interface must extend <code>Repository</code> and be typed to the domain class and an ID type. If you want to expose CRUD methods for that domain type, extend <code>CrudRepository</code> instead of <code>Repository</code>.</p>
<h3 id="defining-query-methods"><a class="header" href="#defining-query-methods">Defining Query Methods</a></h3>
<p>有两种定义 Query Methods 的方法</p>
<p>The repository proxy has two ways to derive a store-specific query from the method name:</p>
<ul>
<li>By deriving the query from the method name directly. 采用函数名的方式</li>
<li>By using a manually defined query. 写 JPQL</li>
</ul>
<h4 id="query-的查找策略"><a class="header" href="#query-的查找策略">Query 的查找策略</a></h4>
<p>With XML configuration, you can configure the strategy at the namespace through the <code>query-lookup-strategy</code> attribute. For Java configuration, you can use the <code>queryLookupStrategy</code> attribute of the <code>Enable${store}Repositories</code> annotation. Some strategies may not be supported for particular datastores.</p>
<h4 id="query-demos"><a class="header" href="#query-demos">Query Demos</a></h4>
<pre><code class="language-java">interface PersonRepository extends Repository&lt;Person, Long&gt; {

    // 注意，此处的参数就是方法名用到的参数
    List&lt;Person&gt; findByEmailAddressAndLastname(EmailAddress emailAddress, String lastname);

    // Enables the distinct flag for the query
    List&lt;Person&gt; findDistinctPeopleByLastnameOrFirstname(String lastname, String firstname);
    List&lt;Person&gt; findPeopleDistinctByLastnameOrFirstname(String lastname, String firstname);

    // Enabling ignoring case for an individual property
    List&lt;Person&gt; findByLastnameIgnoreCase(String lastname);
    // Enabling ignoring case for all suitable properties
    List&lt;Person&gt; findByLastnameAndFirstnameAllIgnoreCase(String lastname, String firstname);

    // Enabling static ORDER BY for a query
    List&lt;Person&gt; findByLastnameOrderByFirstnameAsc(String lastname);
    List&lt;Person&gt; findByLastnameOrderByFirstnameDesc(String lastname);
    
    /***
    * Limiting the result size of a query with Top and First
    */
    User findFirstByOrderByLastnameAsc();

    User findTopByOrderByAgeDesc();

    Page&lt;User&gt; queryFirst10ByLastname(String lastname, Pageable pageable);

    Slice&lt;User&gt; findTop3ByLastname(String lastname, Pageable pageable);

    List&lt;User&gt; findFirst10ByLastname(String lastname, Sort sort);

    List&lt;User&gt; findTop10ByLastname(String lastname, Pageable pageable);
}
</code></pre>
<p>Parsing query method names is divided into subject and predicate. The first part (<code>find…By</code>, <code>exists…By</code>) defines the subject of the query, the second part forms the predicate. </p>
<p>The first <code>By</code> acts as a delimiter to indicate the start of the actual criteria predicate. At a very basic level, you can define conditions on entity properties and concatenate them with <code>And</code> and <code>Or</code>.</p>
<p>JPA 根据函数名构造 SQL 查询：</p>
<table><thead><tr><th style="text-align: left">Keyword</th><th style="text-align: left">Sample</th><th style="text-align: left">JPQL snippet</th></tr></thead><tbody>
<tr><td style="text-align: left"><code>Distinct</code></td><td style="text-align: left"><code>findDistinctByLastnameAndFirstname</code></td><td style="text-align: left"><code>select distinct … where x.lastname = ?1 and x.firstname = ?2</code></td></tr>
<tr><td style="text-align: left"><code>And</code></td><td style="text-align: left"><code>findByLastnameAndFirstname</code></td><td style="text-align: left"><code>… where x.lastname = ?1 and x.firstname = ?2</code></td></tr>
<tr><td style="text-align: left"><code>Or</code></td><td style="text-align: left"><code>findByLastnameOrFirstname</code></td><td style="text-align: left"><code>… where x.lastname = ?1 or x.firstname = ?2</code></td></tr>
<tr><td style="text-align: left"><code>Is</code>, <code>Equals</code></td><td style="text-align: left"><code>findByFirstname</code>,<code>findByFirstnameIs</code>,<code>findByFirstnameEquals</code></td><td style="text-align: left"><code>… where x.firstname = ?1</code></td></tr>
<tr><td style="text-align: left"><code>Between</code></td><td style="text-align: left"><code>findByStartDateBetween</code></td><td style="text-align: left"><code>… where x.startDate between ?1 and ?2</code></td></tr>
<tr><td style="text-align: left"><code>LessThan</code></td><td style="text-align: left"><code>findByAgeLessThan</code></td><td style="text-align: left"><code>… where x.age &lt; ?1</code></td></tr>
<tr><td style="text-align: left"><code>LessThanEqual</code></td><td style="text-align: left"><code>findByAgeLessThanEqual</code></td><td style="text-align: left"><code>… where x.age &lt;= ?1</code></td></tr>
<tr><td style="text-align: left"><code>GreaterThan</code></td><td style="text-align: left"><code>findByAgeGreaterThan</code></td><td style="text-align: left"><code>… where x.age &gt; ?1</code></td></tr>
<tr><td style="text-align: left"><code>GreaterThanEqual</code></td><td style="text-align: left"><code>findByAgeGreaterThanEqual</code></td><td style="text-align: left"><code>… where x.age &gt;= ?1</code></td></tr>
<tr><td style="text-align: left"><code>After</code></td><td style="text-align: left"><code>findByStartDateAfter</code></td><td style="text-align: left"><code>… where x.startDate &gt; ?1</code></td></tr>
<tr><td style="text-align: left"><code>Before</code></td><td style="text-align: left"><code>findByStartDateBefore</code></td><td style="text-align: left"><code>… where x.startDate &lt; ?1</code></td></tr>
<tr><td style="text-align: left"><code>IsNull</code>, <code>Null</code></td><td style="text-align: left"><code>findByAge(Is)Null</code></td><td style="text-align: left"><code>… where x.age is null</code></td></tr>
<tr><td style="text-align: left"><code>IsNotNull</code>, <code>NotNull</code></td><td style="text-align: left"><code>findByAge(Is)NotNull</code></td><td style="text-align: left"><code>… where x.age not null</code></td></tr>
<tr><td style="text-align: left"><code>Like</code></td><td style="text-align: left"><code>findByFirstnameLike</code></td><td style="text-align: left"><code>… where x.firstname like ?1</code></td></tr>
<tr><td style="text-align: left"><code>NotLike</code></td><td style="text-align: left"><code>findByFirstnameNotLike</code></td><td style="text-align: left"><code>… where x.firstname not like ?1</code></td></tr>
<tr><td style="text-align: left"><code>StartingWith</code></td><td style="text-align: left"><code>findByFirstnameStartingWith</code></td><td style="text-align: left"><code>… where x.firstname like ?1</code> (parameter bound with appended <code>%</code>)</td></tr>
<tr><td style="text-align: left"><code>EndingWith</code></td><td style="text-align: left"><code>findByFirstnameEndingWith</code></td><td style="text-align: left"><code>… where x.firstname like ?1</code> (parameter bound with prepended <code>%</code>)</td></tr>
<tr><td style="text-align: left"><code>Containing</code></td><td style="text-align: left"><code>findByFirstnameContaining</code></td><td style="text-align: left"><code>… where x.firstname like ?1</code> (parameter bound wrapped in <code>%</code>)</td></tr>
<tr><td style="text-align: left"><code>OrderBy</code></td><td style="text-align: left"><code>findByAgeOrderByLastnameDesc</code></td><td style="text-align: left"><code>… where x.age = ?1 order by x.lastname desc</code></td></tr>
<tr><td style="text-align: left"><code>Not</code></td><td style="text-align: left"><code>findByLastnameNot</code></td><td style="text-align: left"><code>… where x.lastname &lt;&gt; ?1</code></td></tr>
<tr><td style="text-align: left"><code>In</code></td><td style="text-align: left"><code>findByAgeIn(Collection&lt;Age&gt; ages)</code></td><td style="text-align: left"><code>… where x.age in ?1</code></td></tr>
<tr><td style="text-align: left"><code>NotIn</code></td><td style="text-align: left"><code>findByAgeNotIn(Collection&lt;Age&gt; ages)</code></td><td style="text-align: left"><code>… where x.age not in ?1</code></td></tr>
<tr><td style="text-align: left"><code>True</code></td><td style="text-align: left"><code>findByActiveTrue()</code></td><td style="text-align: left"><code>… where x.active = true</code></td></tr>
<tr><td style="text-align: left"><code>False</code></td><td style="text-align: left"><code>findByActiveFalse()</code></td><td style="text-align: left"><code>… where x.active = false</code></td></tr>
<tr><td style="text-align: left"><code>IgnoreCase</code></td><td style="text-align: left"><code>findByFirstnameIgnoreCase</code></td><td style="text-align: left"><code>… where UPPER(x.firstname) = UPPER(?1)</code></td></tr>
</tbody></table>
<p><strong>根据属性的属性进行查找</strong></p>
<p>x.address.zipCode</p>
<pre><code class="language-java">List&lt;Person&gt; findByAddress_ZipCode(ZipCode zipCode);
</code></pre>
<p><strong>list 作为参数</strong></p>
<pre><code class="language-java">@Query(&quot;select c from Concept c where c.id in ?1&quot;)
List&lt;Concept&gt; findByIds(List idList);
</code></pre>
<h4 id="pageable--page"><a class="header" href="#pageable--page">Pageable / Page</a></h4>
<p><strong>Demo</strong>:</p>
<pre><code class="language-java">Page&lt;User&gt; findByLastname(String lastname, Pageable pageable);

Slice&lt;User&gt; findByLastname(String lastname, Pageable pageable);

List&lt;User&gt; findByLastname(String lastname, Sort sort);

List&lt;User&gt; findByLastname(String lastname, Pageable pageable);
</code></pre>
<p><strong>Page</strong>:</p>
<p>Page 中封装了当前页的内容，和总页数。</p>
<pre><code class="language-java">public interface Page&lt;T&gt; extends Slice&lt;T&gt; {
    static &lt;T&gt; Page&lt;T&gt; empty() {
        return empty(Pageable.unpaged());
    }

    static &lt;T&gt; Page&lt;T&gt; empty(Pageable pageable) {
        return new PageImpl(Collections.emptyList(), pageable, 0L);
    }

    int getTotalPages();

    long getTotalElements();

    &lt;U&gt; Page&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; var1);
}
</code></pre>
<p><strong>Pageable</strong>:</p>
<p>Pageable 中封装了分页的规则，Pageable 的构建 <code>PageRequest.of</code></p>
<pre><code class="language-java">private Pageable getPageable(PageBean pageBean){
    // 默认根据 name 进行 desc 排序
    Sort sort = Sort.by(Sort.Direction.DESC, DEFAULT_SORT_FIELD);
    if(StringUtils.isNotBlank(pageBean.getSortField())) {
        if (StringUtils.isNotBlank(pageBean.getSortOrder()) &amp;&amp; pageBean.getSortOrder().equalsIgnoreCase(&quot;desc&quot;)) {
            sort = Sort.by(Sort.Direction.DESC, pageBean.getSortField());
        } else {
            sort = Sort.by(Sort.Direction.ASC, pageBean.getSortField());
        }
    }
    // 索引页从 0 开始，故需要 - 1
    int page = (int)pageBean.getCurrentPage() - 1;
    int size = (int)pageBean.getPageSize();
    return PageRequest.of(page, size, sort);
}
</code></pre>
<h4 id="sort"><a class="header" href="#sort">Sort</a></h4>
<p>Defining sort expressions:</p>
<pre><code class="language-java">Sort sort = Sort.by(&quot;firstname&quot;).ascending()
  .and(Sort.by(&quot;lastname&quot;).descending());
</code></pre>
<p>Defining sort expressions by using the type-safe API:</p>
<pre><code class="language-java">TypedSort&lt;Person&gt; person = Sort.sort(Person.class);

Sort sort = person.by(Person::getFirstname).ascending()
    .and(person.by(Person::getLastname).descending());
</code></pre>
<h4 id="null-处理"><a class="header" href="#null-处理">null 处理</a></h4>
<p>As of Spring Data 2.0, repository CRUD methods that return an individual aggregate instance use Java 8’s <code>Optional</code> to indicate the potential absence of a value. </p>
<p>Repository methods returning collections, collection alternatives, wrappers, and streams are guaranteed never to return <code>null</code> but rather the corresponding empty representation. See “<a href="https://docs.spring.io/spring-data/jpa/docs/2.5.0/reference/html/#repository-query-return-types">Repository query return types</a>” for details.</p>
<p>三个常见的 null 注解：</p>
<ul>
<li><a href="https://docs.spring.io/spring/docs/5.3.6/javadoc-api/org/springframework/lang/NonNullApi.html"><code>@NonNullApi</code></a>: Used on the package level to declare that the default behavior for parameters and return values is, respectively, neither to accept nor to produce <code>null</code> values.</li>
<li><a href="https://docs.spring.io/spring/docs/5.3.6/javadoc-api/org/springframework/lang/NonNull.html"><code>@NonNull</code></a>: Used on a parameter or return value that must not be <code>null</code> (not needed on a parameter and return value where <code>@NonNullApi</code> applies).</li>
<li><a href="https://docs.spring.io/spring/docs/5.3.6/javadoc-api/org/springframework/lang/Nullable.html"><code>@Nullable</code></a>: Used on a parameter or return value that can be <code>null</code>.</li>
</ul>
<p><strong>Using different nullability constraints</strong> Demo：</p>
<pre><code class="language-java">package com.acme;                            // 1                           

import org.springframework.lang.Nullable;

interface UserRepository extends Repository&lt;User, Long&gt; {

  User getByEmailAddress(EmailAddress emailAddress);    // 2                 

  @Nullable
  User findByEmailAddress(@Nullable EmailAddress emailAdress); // 3         

  Optional&lt;User&gt; findOptionalByEmailAddress(EmailAddress emailAddress); // 4
}
</code></pre>
<ol>
<li>The repository resides in a package (or sub-package) for which we have defined non-null behavior</li>
<li>Throws an <code>EmptyResultDataAccessException</code> when the query does not produce a result. Throws an <code>IllegalArgumentException</code> when the <code>emailAddress</code> handed to the method is <code>null</code>.</li>
<li>Returns <code>null</code> when the query does not produce a result. Also accepts <code>null</code> as the value for <code>emailAddress</code>.</li>
<li>Returns <code>Optional.empty()</code> when the query does not produce a result. Throws an <code>IllegalArgumentException</code> when the <code>emailAddress</code> handed to the method is <code>null</code>.</li>
</ol>
<h4 id="streaming-query-results"><a class="header" href="#streaming-query-results">Streaming Query Results</a></h4>
<pre><code class="language-java">@Query(&quot;select u from User u&quot;)
Stream&lt;User&gt; findAllByCustomQueryAndStream();

Stream&lt;User&gt; readAllByFirstnameNotNull();

@Query(&quot;select u from User u&quot;)
Stream&lt;User&gt; streamAllPaged(Pageable pageable);
</code></pre>
<h3 id="creating-repository-instances"><a class="header" href="#creating-repository-instances">Creating Repository Instances</a></h3>
<p>创建 Repository 对象</p>
<ol>
<li>
<p>直接在 config 中批量注入</p>
<pre><code class="language-java">@Configuration
@EnableJpaRepositories(&quot;com.acme.repositories&quot;) // 指定 repostory 类的位置
class ApplicationConfiguration {

  @Bean
  EntityManagerFactory entityManagerFactory() {
    // …
  }
}
</code></pre>
</li>
<li>
<p>单独创建</p>
<pre><code class="language-java">RepositoryFactorySupport factory = … // Instantiate factory here
UserRepository repository = factory.getRepository(UserRepository.class);



</code></pre>
</li>
</ol>
<h2 id="jpa-repositories"><a class="header" href="#jpa-repositories">JPA Repositories</a></h2>
<p>This chapter points out the specialties for repository support for JPA.</p>
<h3 id="配置"><a class="header" href="#配置">配置</a></h3>
<pre><code class="language-java">@Configuration
@EnableJpaRepositories
@EnableTransactionManagement
class ApplicationConfig {

  @Bean
  public DataSource dataSource() {

    EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();
    return builder.setType(EmbeddedDatabaseType.HSQL).build();
  }

  @Bean
  public LocalContainerEntityManagerFactoryBean entityManagerFactory() {

    HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();
    vendorAdapter.setGenerateDdl(true);

    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
    factory.setJpaVendorAdapter(vendorAdapter);
    factory.setPackagesToScan(&quot;com.acme.domain&quot;);
    factory.setDataSource(dataSource());
    return factory;
  }

  @Bean
  public PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {

    JpaTransactionManager txManager = new JpaTransactionManager();
    txManager.setEntityManagerFactory(entityManagerFactory);
    return txManager;
  }
}
</code></pre>
<h3 id="persist"><a class="header" href="#persist">persist</a></h3>
<p>Saving an entity can be performed with the <code>CrudRepository.save(…)</code> method. It <strong>persists</strong> or <strong>merges</strong> the given entity by using the underlying JPA <code>EntityManager</code>. If the entity has not yet been persisted, Spring Data JPA saves the entity with a call to the <code>entityManager.persist(…)</code> method. Otherwise, it calls the <code>entityManager.merge(…)</code> method.</p>
<h3 id="query-creation"><a class="header" href="#query-creation">Query creation</a></h3>
<h4 id="create-query"><a class="header" href="#create-query">create query</a></h4>
<ol>
<li>
<p>Query creation from method names</p>
<pre><code class="language-java">public interface UserRepository extends Repository&lt;User, Long&gt; {

  List&lt;User&gt; findByEmailAddressAndLastname(String emailAddress, String lastname);
}
</code></pre>
</li>
<li>
<p>@Query</p>
<pre><code class="language-java">public interface UserRepository extends JpaRepository&lt;User, Long&gt; {

  @Query(&quot;select u from User u where u.firstname like %?1&quot;)
  List&lt;User&gt; findByFirstnameEndsWith(String firstname);
}
</code></pre>
<p>2.1 native query</p>
<pre><code class="language-java">public interface UserRepository extends JpaRepository&lt;User, Long&gt; {

  @Query(value = &quot;SELECT * FROM USERS WHERE EMAIL_ADDRESS = ?1&quot;, nativeQuery = true)
  User findByEmailAddress(String emailAddress);
}
</code></pre>
</li>
</ol>
<p>Demo: declare native count queries for pagination at the query method by using <code>@Query</code></p>
<pre><code class="language-java">public interface UserRepository extends JpaRepository&lt;User, Long&gt; {

  @Query(value = &quot;SELECT * FROM USERS WHERE LASTNAME = ?1&quot;,
    countQuery = &quot;SELECT count(*) FROM USERS WHERE LASTNAME = ?1&quot;,
    nativeQuery = true)
  Page&lt;User&gt; findByLastname(String lastname, Pageable pageable);
}
</code></pre>
<h4 id="sort-1"><a class="header" href="#sort-1">sort</a></h4>
<pre><code class="language-java">public interface UserRepository extends JpaRepository&lt;User, Long&gt; {

  @Query(&quot;select u from User u where u.lastname like ?1%&quot;)
  List&lt;User&gt; findByAndSort(String lastname, Sort sort);

  @Query(&quot;select u.id, LENGTH(u.firstname) as fn_len from User u where u.lastname like ?1%&quot;)
  List&lt;Object[]&gt; findByAsArrayAndSort(String lastname, Sort sort);
}

repo.findByAndSort(&quot;lannister&quot;, Sort.by(&quot;firstname&quot;));           //1     
repo.findByAndSort(&quot;stark&quot;, Sort.by(&quot;LENGTH(firstname)&quot;));          //2  
repo.findByAndSort(&quot;targaryen&quot;, JpaSort.unsafe(&quot;LENGTH(firstname)&quot;)); //3
repo.findByAsArrayAndSort(&quot;bolton&quot;, Sort.by(&quot;fn_len&quot;));      //4
</code></pre>
<ol>
<li>Valid <code>Sort</code> expression pointing to property in domain model.</li>
<li>Invalid <code>Sort</code> containing function call. Throws Exception.</li>
<li>Valid <code>Sort</code> containing explicitly <em>unsafe</em> <code>Order</code>.</li>
<li>Valid <code>Sort</code> expression pointing to aliased function.</li>
</ol>
<h4 id="using-named-parameters"><a class="header" href="#using-named-parameters">Using Named Parameters</a></h4>
<pre><code class="language-java">public interface UserRepository extends JpaRepository&lt;User, Long&gt; {

  @Query(&quot;select u from User u where u.firstname = :firstname or u.lastname = :lastname&quot;)
  User findByLastnameOrFirstname(@Param(&quot;lastname&quot;) String lastname,
                                 @Param(&quot;firstname&quot;) String firstname);
}
</code></pre>
<h4 id="specifications"><a class="header" href="#specifications">Specifications</a></h4>
<p>JPA 2 introduces a criteria API that you can use to build queries programmatically. By writing a <code>criteria</code>, you define the where clause of a query for a domain class. Taking another step back, these criteria can be regarded as a predicate over the entity that is described by the JPA criteria API constraints.</p>
<p>Spring Data JPA takes the concept of a specification from Eric Evans' book, “Domain Driven Design”, following the same semantics and providing an API to define such specifications with the JPA criteria API. To support specifications, you can extend your repository interface with the <code>JpaSpecificationExecutor</code> interface, as follows:</p>
<pre><code class="language-java">public interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt;, JpaSpecificationExecutor&lt;Customer&gt; {
 …
}
</code></pre>
<p>The additional interface has methods that let you run specifications in a variety of ways. For example, the <code>findAll</code> method returns all entities that match the specification, as shown in the following example:</p>
<pre><code class="language-java">List&lt;T&gt; findAll(Specification&lt;T&gt; spec);
</code></pre>
<p>The <code>Specification</code> interface is defined as follows:</p>
<pre><code class="language-java">public interface Specification&lt;T&gt; {
  Predicate toPredicate(Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query,
            CriteriaBuilder builder);
}
</code></pre>
<h2 id="foreign-key"><a class="header" href="#foreign-key">foreign key</a></h2>
<p>代码：https://github.com/wansho/jpa</p>
<h3 id="onetoone"><a class="header" href="#onetoone">OneToOne</a></h3>
<h3 id="单向-manytoone"><a class="header" href="#单向-manytoone">单向 ManyToOne</a></h3>
<h3 id="单向-onetomany"><a class="header" href="#单向-onetomany">单向 OneToMany</a></h3>
<h3 id="双向-onetomany"><a class="header" href="#双向-onetomany">双向 OneToMany</a></h3>
<p>注意</p>
<ul>
<li>双向 OneToMany 和 双向 ManyToOne 是一样的</li>
<li>双向的列名外键的 name 要保持一致</li>
<li>如果在 1 的一端 <code>@OneToMany</code> 中使用了 <code>mapperBy</code> 属性，则 <code>@OneToMany</code> 端就不能再使用 <code>@JoinColumn</code> 属性</li>
</ul>
<h3 id="双向-manytomany"><a class="header" href="#双向-manytomany">双向 ManyToMany</a></h3>
<p>必须指定一个关系维护端（Owner Side 中间表），可以通过 <code>@ManyToMany</code> 注释中指定 <code>mappedBy</code> 属性来标识其为关系维护端。</p>
<h2 id="java-persistence-query-language"><a class="header" href="#java-persistence-query-language">Java Persistence Query Language</a></h2>
<h3 id="query-interface"><a class="header" href="#query-interface">Query Interface</a></h3>
<p>Interface used to control query execution.</p>
<p>Query 接口封装了执行数据库查询的相关方法。</p>
<p>获取 Query 对象的方法，是调用 EntityManager 的 createQuery，createNamedQuery，createNativeQuery 方法获取查询对象。</p>
<p>详细的 Query Language 语法和例子，参考 [Jakarta Persistence] 的第四章，Query Language。</p>
<pre><code>A select statement is a string which consists of the following clauses:
• a SELECT clause, which determines the type of the objects or values to be selected.
• a FROM clause, which provides declarations that designate the domain to which the expressions
specified in the other clauses of the query apply.
• an optional WHERE clause, which may be used to restrict the results that are returned by the
query.
• an optional GROUP BY clause, which allows query results to be aggregated in terms of groups.
• an optional HAVING clause, which allows filtering over aggregated groups.
• an optional ORDER BY clause, which may be used to order the results that are returned by the
query.
</code></pre>
<h2 id="criteria-api"><a class="header" href="#criteria-api">criteria-api</a></h2>
<p>The basic semantics of a Criteria query consists of a <code>SELECT</code> clause, a <code>FROM</code> clause, and an optional <code>WHERE</code> clause, similar to a JPQL query. Criteria queries set these clauses by using Java programming language objects, so the query can be created in a typesafe manner.</p>
<p>The Jakarta Persistence Criteria API is used to define queries through the construction of object-based query definition objects, rather than use of the string-based approach of the Jakarta Persistence query language. 动态查询机制。</p>
<p>只需要 root 和 criteriabuilder 两个就够了，root 用来构造属性，criteriabuilder 用来构造查询。</p>
<h3 id="maven"><a class="header" href="#maven">maven</a></h3>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;   
    &lt;version&gt;5.3.2.Final&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="criteriabuilder"><a class="header" href="#criteriabuilder">CriteriaBuilder</a></h3>
<p>查询的构造器，封装了很多查询条件，用于构造查询条件</p>
<p>The <code>javax.persistence.criteria.CriteriaBuilder</code> interface is used to construct</p>
<ul>
<li>Criteria queries</li>
<li>Selections</li>
<li>Expressions</li>
<li>Predicates</li>
<li>Ordering</li>
</ul>
<p>init CriteriaBuilder: </p>
<pre><code class="language-java">EntityManager em = ...;
CriteriaBuilder cb = em.getCriteriaBuilder();
</code></pre>
<h3 id="criteriaquery"><a class="header" href="#criteriaquery">CriteriaQuery</a></h3>
<p>顶层查询对象，自定义查询方式（了解，一般不用）</p>
<p>get CriteriaQuery:</p>
<pre><code class="language-java">CriteriaQuery&lt;Pet&gt; cq = cb.createQuery(Pet.class);
</code></pre>
<h3 id="root"><a class="header" href="#root">Root</a></h3>
<p>代表查询的根对象（查询的任何属性都可以从根对象中获取）</p>
<p>For a particular <code>CriteriaQuery</code> object, the root entity of the query, from which all navigation originates, is called the <strong>query root</strong>. It is similar to the <code>FROM</code> clause in a JPQL query.</p>
<p>Create the query root by calling the <code>from</code> method on the <code>CriteriaQuery</code> instance. The argument to the <code>from</code> method is either the entity class or an <code>EntityType&lt;T&gt;</code> instance for the entity.</p>
<p>The following code sets the query root to the <code>Pet</code> entity:</p>
<pre><code class="language-java">CriteriaQuery&lt;Pet&gt; cq = cb.createQuery(Pet.class);
Root&lt;Pet&gt; pet = cq.from(Pet.class);
</code></pre>
<p>The following code sets the query root to the <code>Pet</code> class by using an <code>EntityType&lt;T&gt;</code> instance:</p>
<pre><code class="language-java">EntityManager em = ...;
Metamodel m = em.getMetamodel();
EntityType&lt;Pet&gt; Pet_ = m.entity(Pet.class);
Root&lt;Pet&gt; pet = cq.from(Pet_);
</code></pre>
<h3 id="example-using-criteria"><a class="header" href="#example-using-criteria">example using criteria</a></h3>
<pre><code class="language-java">
public class Item implements Serializable {

    private Integer itemId;
    private String itemName;
    private String itemDescription;
    private Integer itemPrice;

   // standard setters and getters
}


Session session = HibernateUtil.getHibernateSession();
CriteriaBuilder cb = session.getCriteriaBuilder();
CriteriaQuery&lt;Item&gt; cr = cb.createQuery(Item.class);
Root&lt;Item&gt; root = cr.from(Item.class);
cr.select(root);

Query&lt;Item&gt; query = session.createQuery(cr);
List&lt;Item&gt; results = query.getResultList();
</code></pre>
<h4 id="using-expressions"><a class="header" href="#using-expressions">Using Expressions</a></h4>
<p>To get items having a price of more than 1000:</p>
<pre><code class="language-java">cr.select(root).where(cb.gt(root.get(&quot;itemPrice&quot;), 1000));
</code></pre>
<p>Next, getting items having <em>itemPrice</em> less than 1000:</p>
<pre><code class="language-java">cr.select(root).where(cb.lt(root.get(&quot;itemPrice&quot;), 1000));
</code></pre>
<p>Items having <em>itemName</em> contain <em>Chair</em>:</p>
<pre><code class="language-java">cr.select(root).where(cb.like(root.get(&quot;itemName&quot;), &quot;%chair%&quot;));
</code></pre>
<p>Records having <em>itemPrice</em> in between 100 and 200:</p>
<pre><code class="language-java">cr.select(root).where(cb.between(root.get(&quot;itemPrice&quot;), 100, 200));
</code></pre>
<p>Items having <em>itemName</em> in <em>Skate Board, Paint</em> and <em>Glue</em>:</p>
<pre><code class="language-java">cr.select(root).where(root.get(&quot;itemName&quot;).in(&quot;Skate Board&quot;, &quot;Paint&quot;, &quot;Glue&quot;));
</code></pre>
<p>To check if the given property is null:</p>
<pre><code class="language-java">cr.select(root).where(cb.isNull(root.get(&quot;itemDescription&quot;)));
</code></pre>
<p>To check if the given property is not null:</p>
<pre><code class="language-java">cr.select(root).where(cb.isNotNull(root.get(&quot;itemDescription&quot;)));
</code></pre>
<p><strong>chain expressions</strong>:</p>
<pre><code class="language-java">Predicate[] predicates = new Predicate[2];
predicates[0] = cb.isNull(root.get(&quot;itemDescription&quot;));
predicates[1] = cb.like(root.get(&quot;itemName&quot;), &quot;chair%&quot;);
cr.select(root).where(predicates);
</code></pre>
<p>To add two expressions with logical operations:</p>
<pre><code class="language-java">Predicate greaterThanPrice = cb.gt(root.get(&quot;itemPrice&quot;), 1000);
Predicate chairItems = cb.like(root.get(&quot;itemName&quot;), &quot;Chair%&quot;);
</code></pre>
<p>Items with the above-defined conditions joined with <em>Logical OR</em>:</p>
<pre><code class="language-java">cr.select(root).where(cb.or(greaterThanPrice, chairItems));
</code></pre>
<p>To get items matching with the above-defined conditions joined with <em>Logical AND</em>:</p>
<pre><code class="language-java">cr.select(root).where(cb.and(greaterThanPrice, chairItems));
</code></pre>
<h4 id="sorting"><a class="header" href="#sorting">sorting</a></h4>
<pre><code class="language-java">cr.orderBy(
  cb.asc(root.get(&quot;itemName&quot;)), 
  cb.desc(root.get(&quot;itemPrice&quot;)));
</code></pre>
<h4 id="projections-aggregates-and-grouping-functions"><a class="header" href="#projections-aggregates-and-grouping-functions">projections, aggregates, and grouping functions</a></h4>
<p><strong>count</strong></p>
<pre><code class="language-java">CriteriaQuery&lt;Long&gt; cr = cb.createQuery(Long.class);
Root&lt;Item&gt; root = cr.from(Item.class);
cr.select(cb.count(root));
Query&lt;Long&gt; query = session.createQuery(cr);
List&lt;Long&gt; itemProjected = query.getResultList();
</code></pre>
<p><strong><em>Aggregate</em> function for Average</strong></p>
<pre><code class="language-java">CriteriaQuery&lt;Double&gt; cr = cb.createQuery(Double.class);
Root&lt;Item&gt; root = cr.from(Item.class);
cr.select(cb.avg(root.get(&quot;itemPrice&quot;)));
Query&lt;Double&gt; query = session.createQuery(cr);
List avgItemPriceList = query.getResultList();
</code></pre>
<p>Other useful aggregate methods that are available are <em>sum()</em>, <em>max()</em>, <em>min()</em> <strong>,</strong> <em>count()</em> etc.</p>
<h2 id="specifications-1"><a class="header" href="#specifications-1">Specifications</a></h2>
<p>Specification 是 Spring 框架的一部分，是 Spring 对 Criteria API （root，criteria）的封装</p>
<p>JPA 2 introduces a criteria API that you can use to build queries programmatically. By writing a <code>criteria</code>, you define the <strong>where clause</strong> of a query for a domain class. Taking another step back, these criteria can be regarded as a <strong>predicate</strong> over the entity that is described by the JPA criteria API constraints.</p>
<p>The <strong>power of specifications</strong> really shines when you combine them to create new <code>Specification</code> objects.</p>
<p><code>Specification</code> offers some “glue-code” default methods to chain and combine <code>Specification</code> instances. These methods let you extend your data access layer by creating new <code>Specification</code> implementations and combining them with already existing implementations.</p>
<p>Although this approach（直接按照规则写接口，不实现的方式） is really convenient (you don’t even have to write a single line of implementation code to get the queries executed) it has two drawbacks: first, the number of query methods might grow for larger applications because of - and that’s the second point - the queries define a fixed set of criterias. To avoid these two drawbacks, wouldn’t it be cool if you could come up with a set of atomic predicates that you could combine dynamically to build your query?</p>
<p>想要引入 Specifications 特性，必须继承 <code>JpaSpecificationExecutor</code> 接口。</p>
<p><strong>Specification</strong> 是一个函数式接口</p>
<pre><code class="language-java">public interface Specification&lt;T&gt; {
  Predicate toPredicate(Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query,
            CriteriaBuilder builder);
}
</code></pre>
<p>Demo: Specifications for a Customer</p>
<pre><code class="language-java">public class CustomerSpecs {

  public static Specification&lt;Customer&gt; isLongTermCustomer() {
    return (root, query, builder) -&gt; {
      LocalDate date = LocalDate.now().minusYears(2);
      return builder.lessThan(root.get(Customer_.createdAt), date);
    };
  }

  public static Specification&lt;Customer&gt; hasSalesOfMoreThan(MonetaryAmount value) {
    return (root, query, builder) -&gt; {
      // build query here
    };
  }
}
</code></pre>
<pre><code class="language-java">// Using a simple Specification
List&lt;Customer&gt; customers = customerRepository.findAll(isLongTermCustomer());

// Combined Specifications
MonetaryAmount amount = new MonetaryAmount(200.0, Currencies.DOLLAR);
List&lt;Customer&gt; customers = customerRepository.findAll(
  isLongTermCustomer().or(hasSalesOfMoreThan(amount)));
</code></pre>
<p>Another Demo：</p>
<pre><code class="language-java">private Specification&lt;EntityGraph&gt; getSpecification(PageBean pageBean) {
        return (root, query, criteriaBuilder) -&gt; {
            List&lt;Predicate&gt; predicateList = new ArrayList&lt;&gt;();
            if(StringUtils.isNotEmpty(pageBean.getFilterValue())){
                predicateList.add(criteriaBuilder.equal(root.get(DEFAULT_FILTER_FIELD), pageBean.getFilterValue()));
            }
            return criteriaBuilder.and(predicateList.toArray(new Predicate[0]));
        };
    }
</code></pre>
<p>root 负责取成员变量，query 是 CriteriaQuery 类型，负责生成 root，criteriaBuilder 是 CriteriaBuilder 类型</p>
<h2 id="jpa-实现"><a class="header" href="#jpa-实现">jpa 实现</a></h2>
<h3 id="hibernate"><a class="header" href="#hibernate">Hibernate</a></h3>
<p>常见配置：</p>
<pre><code class="language-yml">jpa:
    database: mysql
    show-sql: true
    properties:
      hibernate:
        hbm2ddl:
          # 自动更新维护表结构
          auto: update
        dialect: org.hibernate.dialect.MySQL55Dialect
        format_sql: true # 对 sql 进行格式化
    open-in-view: false
</code></pre>
<h2 id="join-in-jpa"><a class="header" href="#join-in-jpa">join in jpa</a></h2>
<h2 id="questions"><a class="header" href="#questions">Questions</a></h2>
<ul>
<li>
<p>@LastModifiedDate 不起作用的解决方法</p>
<p>在实体中添加注解 @EntityListeners(AuditingEntityListener.class)监听实体变化</p>
<p>在自动更新时间戳字段增加 @LastModifiedDate</p>
<p>在Spring boot启动类增加注解 @EnableJpaAuditing启用JPA审计(自动填充默认值)</p>
</li>
<li></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../computer-science-notebook/note-for-java-web/database.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../computer-science-notebook/note-for-java-web/mybatis.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../computer-science-notebook/note-for-java-web/database.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../computer-science-notebook/note-for-java-web/mybatis.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
